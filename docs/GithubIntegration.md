# GitHub â†’ Notion æ—¥è¨˜é€²æ—åŒæœŸã‚·ã‚¹ãƒ†ãƒ è¨­è¨ˆãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ

## 1. ç›®çš„

æŒ‡å®šæ—¥ä»˜ã¾ãŸã¯æ—¥ä»˜ç¯„å›²ã®æ—¥æœ¬æ™‚é–“ï¼ˆAsia/Tokyoï¼‰ã«ãŠã„ã¦ã€**è‡ªåˆ†ãŒã‚ªãƒ¼ãƒŠãƒ¼ï¼ç®¡ç†ã™ã‚‹ GitHub ãƒªãƒã‚¸ãƒˆãƒª**ã®ä»¥ä¸‹ã‚’å–å¾—ã—ã€Notion ã®æ—¥è¨˜ã‚¨ãƒ³ãƒˆãƒªãƒ¼ï¼ˆå¯¾è±¡ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã®è¡Œï¼‰ã® `Github` ãƒ†ã‚­ã‚¹ãƒˆãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã«**ä¸Šæ›¸ã**ã§åæ˜ ã™ã‚‹ã“ã¨ã§ã€ãã®æ—¥ã®é€²æ—ã‚’è‡ªå‹•è¨˜éŒ²ã™ã‚‹ã€‚

* é–‰ã˜ã‚‰ã‚ŒãŸ Issueï¼ˆğŸ«ï¼‰
* ãƒãƒ¼ã‚¸ã•ã‚ŒãŸ PRï¼ˆğŸ”€ï¼‰

å‡ºåŠ›ä¾‹ï¼ˆNotion æ—¥è¨˜å†…ã® `Github` ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã«å…¥ã‚‹å†…å®¹ã€‚æ—¥ä»˜è¦‹å‡ºã—ã¯ä¸è¦ï¼‰ï¼š

```
- ğŸ« Issue #42: [ãƒã‚°ä¿®æ­£ã®ä»¶](https://github.com/owner/repo/issues/42)
- ğŸ”€ PR #87: [æ©Ÿèƒ½è¿½åŠ ã‚’ãƒãƒ¼ã‚¸æ¸ˆã¿](https://github.com/owner/repo/pull/87)
```

è©²å½“ãŒãªã‘ã‚Œã°ï¼š

```
- è©²å½“ãªã—
```

## 2. è¦ä»¶æ•´ç†

### 2.1 æ©Ÿèƒ½è¦ä»¶

1. è‡ªåˆ†ãŒã‚ªãƒ¼ãƒŠãƒ¼ã® GitHub ãƒªãƒã‚¸ãƒˆãƒªï¼ˆ`affiliation=owner`ï¼‰ã®ã¿ã‚’å¯¾è±¡ã¨ã—ã€ä»¥ä¸‹ã‚’å–å¾—ã™ã‚‹ã€‚

   * æ—¥æœ¬æ™‚é–“ï¼ˆJST / Asia/Tokyoï¼‰ã§æŒ‡å®šæ—¥ä»˜ï¼ˆ00:00ã€œ23:59:59ï¼‰ã«é–‰ã˜ã‚‰ã‚ŒãŸ Issueï¼ˆPR ã§ãªã„ã‚‚ã®ï¼‰ã€‚
   * åŒã˜ãæŒ‡å®šæ—¥ä»˜ã«ãƒãƒ¼ã‚¸ã•ã‚ŒãŸ PRï¼ˆmerged\_at ã‚’å³å¯†ã«ç¢ºèªï¼‰ã€‚
2. å–å¾—ã—ãŸé …ç›®ã‚’ Markdown ãƒªã‚¹ãƒˆã«æ•´å½¢ã—ã€çµµæ–‡å­—ã§åŒºåˆ¥ã™ã‚‹ã€‚

   * Issue: ğŸ«
   * PR: ğŸ”€
3. æŒ‡å®šæ—¥ä»˜ï¼ç¯„å›²ã”ã¨ã« Notion ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ï¼ˆID: ç’°å¢ƒå¤‰æ•° `NOTION_DB_ID` ã§æŒ‡å®šï¼‰ã‚’ã‚¯ã‚¨ãƒªã—ã€`æ—¥ä»˜` ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ï¼ˆDate å‹ï¼‰ã¨ä¸€è‡´ã™ã‚‹ãƒšãƒ¼ã‚¸ã‚’è¦‹ã¤ã‘ã¦ã€`Github` ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ï¼ˆãƒ†ã‚­ã‚¹ãƒˆï¼‰ã‚’ä¸Šæ›¸ãæ›´æ–°ã™ã‚‹ã€‚
4. æ—¥ä»˜æŒ‡å®šã¯ CLI å¼•æ•°ã§å˜ä¸€ï¼ˆ`YYYYMMDD`ï¼‰ã¾ãŸã¯ç¯„å›²ï¼ˆ`YYYYMMDD-YYYYMMDD`ï¼‰ã‚’å—ã‘å–ã‚Šã€å„æ—¥ã”ã¨ã«å‡¦ç†ã™ã‚‹ã€‚
5. å†ªç­‰æ€§ï¼šåŒä¸€æ—¥ã‚’å†å®Ÿè¡Œã—ã¦ã‚‚ä¸Šæ›¸ãã•ã‚Œã‚‹ã ã‘ã§å•é¡Œãªã„ï¼ˆé‡è¤‡é˜²æ­¢ã¯ä¸Šæ›¸ãæ–¹å¼ã§æ‹…ä¿ï¼‰ã€‚
6. å®Ÿè¡Œã¯ CLI ãƒ™ãƒ¼ã‚¹ï¼ˆå°†æ¥ Web API åŒ–ã¯æ‹¡å¼µã¨ã—ã¦ä¿ç•™ï¼‰ã€‚
7. å®šæœŸå®Ÿè¡Œã¯å‰æ—¥åˆ†ã‚’æ—¥æœ¬æ™‚é–“ 24:30 é ƒã«èµ°ã‚‰ã›ã‚‹æƒ³å®šï¼ˆä¾‹: 8/1 00:30 JST ã« 7/31 ã‚’å‡¦ç†ï¼‰ã€‚
8. é€šçŸ¥ã¯ä¸è¦ï¼ˆæˆåŠŸæ™‚ã¯ä½•ã‚‚ã—ãªã„ã€‚å¤±æ•—æ™‚ã®ãƒ­ã‚°ã¯å‘¼ã³å‡ºã—å…ƒã§ç¢ºèªã™ã‚‹ï¼å°†æ¥ã®æ‹¡å¼µã§ãƒ¡ãƒ¼ãƒ«é€šçŸ¥è¿½åŠ å¯èƒ½ï¼‰ã€‚

### 2.2 éæ©Ÿèƒ½è¦ä»¶

* èªè¨¼æƒ…å ±ï¼ˆãƒˆãƒ¼ã‚¯ãƒ³ï¼‰ã‚’ç’°å¢ƒå¤‰æ•°ã¾ãŸã¯ã‚·ãƒ¼ã‚¯ãƒ¬ãƒƒãƒˆã§ç®¡ç†ã—ã€ã‚³ãƒ¼ãƒ‰ã«ç›´æ›¸ãã—ãªã„ã€‚
* æ—¥æœ¬æ™‚é–“åŸºæº–ã§ã®ã€Œãã®æ—¥ã€ã®åˆ¤å®šã‚’æ­£ç¢ºã«è¡Œã†ï¼ˆJSTâ†’UTCã®å¤‰æ›ã‚’å«ã‚€ï¼‰ã€‚
* ã‚¨ãƒ©ãƒ¼æ™‚ã¯ä¾‹å¤–ã‚’æŠ•ã’ã¦å¤±æ•—ã‚’æ˜ç¤ºã—ã€å‘¼ã³å‡ºã—å…ƒï¼ˆæ‰‹å‹•å®Ÿè¡Œã‚„ CIï¼‰ã§å†è©¦è¡Œ/ãƒ­ã‚°å–å¾—å¯èƒ½ã«ã™ã‚‹ã€‚
* ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã¯äººãŒãã®ã¾ã¾èª­ã‚ã¦ãƒªãƒ³ã‚¯ã‚‚æ©Ÿèƒ½ã™ã‚‹ Markdown å½¢å¼ã€‚

## 3. å®Ÿè£…ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ

### 3.1 ç’°å¢ƒå¤‰æ•°ï¼ˆå¿…é ˆï¼‰

* `GITHUB_TOKEN`: Personal Access Tokenã€‚ã‚¹ã‚³ãƒ¼ãƒ—ã¯ `repo`ï¼ˆè‡ªåˆ†ãŒã‚ªãƒ¼ãƒŠãƒ¼ã®ãƒ—ãƒ©ã‚¤ãƒ™ãƒ¼ãƒˆãƒ»ãƒ‘ãƒ–ãƒªãƒƒã‚¯ä¸¡æ–¹ã‚’èª­ã‚ã‚‹ã‚ˆã†ã«ãªã‚‹ï¼‰ã€‚
* `NOTION_TOKEN`: Notion Integration ãƒˆãƒ¼ã‚¯ãƒ³ã€‚å¯¾è±¡ DB ã«ã‚¢ã‚¯ã‚»ã‚¹æ¨©ã‚’ä¸ãˆã¦ãŠãã€‚
* `NOTION_DB_ID`: Notion ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ IDï¼ˆ32æ–‡å­—ã®è‹±æ•°å­—ï¼‰

### 3.2 CLI ã‚¹ã‚¯ãƒªãƒ—ãƒˆï¼ˆPythonï¼‰

* å…¥åŠ›: 1ã¤ã®å¼•æ•°ï¼ˆä¾‹: `20250731` ã¾ãŸã¯ `20250701-20250731`ï¼‰

* å‡¦ç†ã®æµã‚Œï¼ˆæ—¥ä»˜ã”ã¨ã«ï¼‰ï¼š

  1. æŒ‡å®šæ—¥ã® JST ç¯„å›²ï¼ˆ00:00ã€œ23:59:59ï¼‰ã‚’ UTC ã«å¤‰æ›ã€‚
  2. GitHub ã‹ã‚‰è‡ªåˆ†ãŒã‚ªãƒ¼ãƒŠãƒ¼ã®ãƒªãƒã‚¸ãƒˆãƒªä¸€è¦§ã‚’å–å¾—ï¼ˆ`/user/repos?affiliation=owner` ã‚’ãƒšãƒ¼ã‚¸ãƒãƒ¼ã‚·ãƒ§ãƒ³ï¼‰ã€‚
  3. å„ãƒªãƒã‚¸ãƒˆãƒªã«ã¤ã„ã¦ï¼š

     * é–‰ã˜ãŸ Issueï¼ˆPR ã§ã¯ãªã„ï¼‰ã‚’å–å¾—ã—ã€`closed_at` ãŒè©²å½“ UTC ç¯„å›²å†…ã®ã‚‚ã®ã‚’é¸åˆ¥ã€‚
     * Search API ã§ `is:pr is:merged merged:YYYY-MM-DD` ã‚’ä½¿ã„ PR ã‚’åˆ—æŒ™ã—ã€è©³ç´°ã‚’å–ã‚Šã«è¡Œã£ã¦ `merged_at` ã‚’è©²å½“ UTC ç¯„å›²å†…ã®ã‚‚ã®ã ã‘æ¡ç”¨ã€‚
  4. å–å¾—ã—ãŸ Issue/PR ã‚’çµµæ–‡å­—ä»˜ã Markdown ãƒªã‚¹ãƒˆã«æ•´å½¢ã€‚
  5. Notion DB ã‚’ã‚¯ã‚¨ãƒªã—ã¦ `æ—¥ä»˜` ãŒãã®æ—¥ã¨ç­‰ã—ã„ãƒšãƒ¼ã‚¸ã‚’å–å¾—ã€‚
  6. ãã®ãƒšãƒ¼ã‚¸ã® `Github` ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã‚’ä¸Šæ›¸ãã—ã€æ•´å½¢æ¸ˆã¿ãƒ†ã‚­ã‚¹ãƒˆã‚’ã‚»ãƒƒãƒˆã€‚

* ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆä¾‹ï¼ˆè©²å½“ãŒã‚ã‚‹ã¨ãï¼‰ï¼š

  ```
  - ğŸ« Issue #123: [ã‚¿ã‚¤ãƒˆãƒ«](https://github.com/owner/repo/issues/123)
  - ğŸ”€ PR #456: [æ©Ÿèƒ½å](https://github.com/owner/repo/pull/456)
  ```

  è©²å½“ãŒãªã„ã¨ãï¼š

  ```
  - è©²å½“ãªã—
  ```

### 3.3 GitHub Actionsï¼ˆå°†æ¥ã®å®šæœŸå®Ÿè¡Œã¸ã®æ‹¡å¼µï¼ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆï¼‰

äºˆå®šï¼šå‰æ—¥åˆ†ã‚’ JST 24:30ï¼ˆ= ç¿Œæ—¥ 15:30 UTCï¼‰ã«èµ°ã‚‰ã›ã‚‹ã€‚
ã‚µãƒ³ãƒ—ãƒ« workflowï¼ˆãƒªãƒã‚¸ãƒˆãƒªå†…ã« `sync.py` ã‚’ç½®ãå‰æï¼‰ï¼š

```yaml
name: Daily GitHubâ†’Notion Sync

on:
  schedule:
    - cron: '30 15 * * *'  # æ¯æ—¥ 15:30 UTC = å‰æ—¥ JST 24:30 é ƒ

jobs:
  sync:
    runs-on: ubuntu-latest
    steps:
      - name: ãƒã‚§ãƒƒã‚¯ã‚¢ã‚¦ãƒˆ
        uses: actions/checkout@v4

      - name: Python ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—
        uses: actions/setup-python@v4
        with:
          python-version: '3.11'

      - name: ä¾å­˜ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
        run: pip install requests python-dateutil

      - name: å‰æ—¥åˆ†ã‚’å®Ÿè¡Œ
        env:
          GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}  # repo ã‚¹ã‚³ãƒ¼ãƒ—ã® PAT
          NOTION_TOKEN: ${{ secrets.NOTION_TOKEN }}
          NOTION_DB_ID: '16fde731d2cf8115b5b9dda21c6e57cc'
        run: |
          # æ—¥æœ¬æ™‚é–“ã§å‰æ—¥ã‚’ YYYYMMDD å½¢å¼ã« (ä¾‹: date ã‚³ãƒãƒ³ãƒ‰ã‚’ä½¿ã†ç’°å¢ƒãªã‚‰)
          python sync.py $(date -d '9 hours ago -1 day' +'%Y%m%d')
```

> â€»ç¾æ™‚ç‚¹ã§ã¯ CLI å®Ÿè¡ŒãŒä¸»ç›®çš„ãªã®ã§ã“ã® Actions ã¯ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã€‚å¿…è¦ã«ãªã£ãŸã‚‰ Secrets ã‚’ GitHub ä¸Šã§è¨­å®šã—ã¦æœ‰åŠ¹åŒ–ã™ã‚‹ã€‚

## 4. å…·ä½“çš„ãª Python å®Ÿè£…ä¾‹ï¼ˆsync.pyï¼‰

```python
import os
import sys
import datetime
import requests

# ã‚¿ã‚¤ãƒ ã‚¾ãƒ¼ãƒ³ï¼šæ—¥æœ¬æ™‚é–“
JST = datetime.timezone(datetime.timedelta(hours=9))

# ç’°å¢ƒå¤‰æ•°å–å¾—
GITHUB_TOKEN = os.getenv("GITHUB_TOKEN")
NOTION_TOKEN = os.getenv("NOTION_TOKEN")
NOTION_DB_ID = os.getenv("NOTION_DB_ID")

if not (GITHUB_TOKEN and NOTION_TOKEN and NOTION_DB_ID):
    print("ç’°å¢ƒå¤‰æ•° GITHUB_TOKEN, NOTION_TOKEN, NOTION_DB_ID ã‚’è¨­å®šã—ã¦ãã ã•ã„ã€‚")
    sys.exit(1)

HEADERS_GH = {"Authorization": f"token {GITHUB_TOKEN}", "Accept": "application/vnd.github+json"}
HEADERS_NOTION = {
    "Authorization": f"Bearer {NOTION_TOKEN}",
    "Notion-Version": "2022-06-28",
    "Content-Type": "application/json",
}


def parse_date_range(arg: str):
    # YYYYMMDD ã¾ãŸã¯ YYYYMMDD-YYYYMMDD
    if "-" in arg:
        start_str, end_str = arg.split("-", 1)
        start = datetime.datetime.strptime(start_str, "%Y%m%d").date()
        end = datetime.datetime.strptime(end_str, "%Y%m%d").date()
    else:
        start = datetime.datetime.strptime(arg, "%Y%m%d").date()
        end = start
    if end < start:
        raise ValueError("æ—¥ä»˜ç¯„å›²ã®é–‹å§‹ãŒçµ‚äº†ã‚ˆã‚Šå¾Œã§ã™ã€‚")
    days = []
    cur = start
    while cur <= end:
        days.append(cur)
        cur += datetime.timedelta(days=1)
    return days


def get_owned_repos():
    # è‡ªåˆ†ãŒã‚ªãƒ¼ãƒŠãƒ¼ã®ãƒªãƒã‚¸ãƒˆãƒªä¸€è¦§ã‚’å–å¾—
    repos = []
    page = 1
    while True:
        resp = requests.get(
            "https://api.github.com/user/repos",
            headers=HEADERS_GH,
            params={"per_page": 100, "page": page, "affiliation": "owner"},  # ã‚ªãƒ¼ãƒŠãƒ¼ã ã‘
        )
        resp.raise_for_status()
        batch = resp.json()
        if not batch:
            break
        repos.extend(batch)
        page += 1
    return repos


def fetch_issues_for_date(date: datetime.date):
    # ãã®æ—¥ï¼ˆJSTï¼‰ã® closed issueï¼ˆPR ã§ã¯ãªã„ï¼‰ã‚’é›†ã‚ã‚‹
    start_jst = datetime.datetime.combine(date, datetime.time(0, 0), tzinfo=JST)
    end_jst = datetime.datetime.combine(date, datetime.time(23, 59, 59), tzinfo=JST)
    start_utc = start_jst.astimezone(datetime.timezone.utc)
    end_utc = end_jst.astimezone(datetime.timezone.utc)

    items = []
    for repo in get_owned_repos():
        owner = repo["owner"]["login"]
        name = repo["name"]
        page = 1
        while True:
            resp = requests.get(
                f"https://api.github.com/repos/{owner}/{name}/issues",
                headers=HEADERS_GH,
                params={"state": "closed", "per_page": 100, "page": page, "since": start_utc.isoformat()},
            )
            resp.raise_for_status()
            batch = resp.json()
            if not batch:
                break
            for issue in batch:
                if "pull_request" in issue:
                    continue  # PR ã§ã¯ãªã„
                closed_at = issue.get("closed_at")
                if not closed_at:
                    continue
                closed_dt = datetime.datetime.fromisoformat(closed_at.rstrip("Z")).replace(tzinfo=datetime.timezone.utc)
                if start_utc <= closed_dt <= end_utc:
                    items.append({
                        "type": "issue",
                        "repo": f"{owner}/{name}",
                        "number": issue["number"],
                        "title": issue["title"],
                        "url": issue["html_url"],
                    })
            page += 1
    return items


def fetch_prs_for_date(date: datetime.date):
    # ãã®æ—¥ï¼ˆJSTï¼‰ã« merged ã•ã‚ŒãŸ PR ã‚’åé›†
    start_jst = datetime.datetime.combine(date, datetime.time(0, 0), tzinfo=JST)
    end_jst = datetime.datetime.combine(date, datetime.time(23, 59, 59), tzinfo=JST)
    start_utc = start_jst.astimezone(datetime.timezone.utc)
    end_utc = end_jst.astimezone(datetime.timezone.utc)

    results = []
    for repo in get_owned_repos():
        owner = repo["owner"]["login"]
        name = repo["name"]
        date_str = date.strftime("%Y-%m-%d")
        query = f"repo:{owner}/{name} is:pr is:merged merged:{date_str}"
        resp = requests.get(
            "https://api.github.com/search/issues",
            headers=HEADERS_GH,
            params={"q": query, "per_page": 100},
        )
        resp.raise_for_status()
        for pr in resp.json().get("items", []):
            # è©³ç´°å–å¾—ã—ã¦ merged_at ã‚’ç¢ºèª
            pr_meta_url = pr["pull_request"]["url"]
            detail = requests.get(pr_meta_url, headers=HEADERS_GH)
            detail.raise_for_status()
            pr_data = detail.json()
            merged_at = pr_data.get("merged_at")
            if not merged_at:
                continue
            merged_dt = datetime.datetime.fromisoformat(merged_at.rstrip("Z")).replace(tzinfo=datetime.timezone.utc)
            if start_utc <= merged_dt <= end_utc:
                results.append({
                    "type": "pr",
                    "repo": f"{owner}/{name}",
                    "number": pr_data["number"],
                    "title": pr_data["title"],
                    "url": pr_data["html_url"],
                })
    return results


def build_markdown(items: list):
    if not items:
        return "- è©²å½“ãªã—"
    lines = []
    for it in items:
        if it["type"] == "issue":
            lines.append(f"- ğŸ« Issue #{it['number']}: [{it['title']}]({it['url']})")
        else:
            lines.append(f"- ğŸ”€ PR #{it['number']}: [{it['title']}]({it['url']})")
    return "\n".join(lines)


def find_notion_page(date: datetime.date):
    # æ—¥ä»˜ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ãŒä¸€è‡´ã™ã‚‹ãƒšãƒ¼ã‚¸ã‚’æ¤œç´¢
    formatted = date.strftime("%Y-%m-%d")
    payload = {
        "filter": {
            "property": "æ—¥ä»˜",
            "date": {"equals": formatted}
        },
        "page_size": 1,
    }
    resp = requests.post(f"https://api.notion.com/v1/databases/{NOTION_DB_ID}/query", headers=HEADERS_NOTION, json=payload)
    resp.raise_for_status()
    results = resp.json().get("results", [])
    if not results:
        return None
    return results[0]


def update_notion(page_id: str, text: str):
    payload = {
        "properties": {
            "Github": {
                "rich_text": [
                    {"type": "text", "text": {"content": text}}
                ]
            }
        }
    }
    resp = requests.patch(f"https://api.notion.com/v1/pages/{page_id}", headers=HEADERS_NOTION, json=payload)
    resp.raise_for_status()
    return resp.json()


def main():
    if len(sys.argv) != 2:
        print("ä½¿ã„æ–¹: python sync.py 20250731 ã¾ãŸã¯ 20250701-20250731")
        sys.exit(1)
    try:
        dates = parse_date_range(sys.argv[1])
    except Exception as e:
        print(f"æ—¥ä»˜ãƒ‘ãƒ¼ã‚¹å¤±æ•—: {e}")
        sys.exit(1)

    for date in dates:
        try:
            issues = fetch_issues_for_date(date)
            prs = fetch_prs_for_date(date)
            all_items = issues + prs
            md = build_markdown(all_items)
            page = find_notion_page(date)
            if not page:
                print(f"[è­¦å‘Š] {date} ã«å¯¾å¿œã™ã‚‹ Notion ãƒšãƒ¼ã‚¸ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“ã€‚")
                continue
            page_id = page["id"]
            update_notion(page_id, md)
            print(f"[æˆåŠŸ] {date} ã‚’æ›´æ–°ã—ã¾ã—ãŸã€‚å†…å®¹:\n{md}")
        except Exception as e:
            print(f"[ã‚¨ãƒ©ãƒ¼] {date} ã®å‡¦ç†ã«å¤±æ•—ã—ã¾ã—ãŸ: {e}")
            raise

if __name__ == "__main__":
    main()
```

## 5. å®Ÿè¡Œä¾‹ï¼ˆæ‰‹å‹•ï¼‰

```bash
GITHUB_TOKEN=... NOTION_TOKEN=... NOTION_DB_ID=16fde731d2cf8115b5b9dda21c6e57cc python sync.py 20250801
```

ã“ã‚Œã¯æ—¥æœ¬æ™‚é–“ 2025-08-01 æ—¥è¨˜ã®é€²æ—ã‚’æ›´æ–°ã™ã‚‹ã€‚
ï¼ˆå†…éƒ¨ã§ã¯ 2025-08-01 JST ã® Issue/PR ã‚’å–ã‚‹ï¼‰

## 6. å°†æ¥ã®æ‹¡å¼µæ¡ˆ

* GitHub Actions åŒ–ï¼šå‰æ—¥åˆ†ã‚’è‡ªå‹•å®Ÿè¡Œã—ã¦å¤±æ•—æ™‚ãƒ¡ãƒ¼ãƒ«é€šçŸ¥ï¼ˆç¾çŠ¶ã¯ CLI ã ãŒã€å¿…è¦ãªã‚‰ workflow ã‚’è¿½åŠ ï¼‰
* æ›´æ–°å‰å¾Œã®å·®åˆ†ä¿æŒï¼ˆå±¥æ­´ä¿å­˜ï¼‰
* å†å®Ÿè¡Œå±¥æ­´ãƒ­ã‚°ã‚’å¤–éƒ¨ã«ã‚¹ãƒˆã‚¢ï¼ˆç›£æŸ»ç”¨ãƒ•ã‚¡ã‚¤ãƒ« or S3 ç­‰ï¼‰
* Web API åŒ–ï¼š`?range=YYYYMMDD-YYYYMMDD` ã§ HTTP å©ã‘ã‚‹ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆã«ã™ã‚‹
* é€šçŸ¥è¿½åŠ ï¼šå¤±æ•—æ™‚ã«ãƒ¡ãƒ¼ãƒ«ï¼Slackï¼Teams ã§ã‚¢ãƒ©ãƒ¼ãƒˆ

## 7. æ³¨æ„ç‚¹

* GitHub API ãƒ¬ãƒ¼ãƒˆåˆ¶é™ï¼šè‡ªåˆ†ã®ã‚ªãƒ¼ãƒŠãƒ¼ãƒªãƒã‚¸ãƒˆãƒªã®ã¿ã‚’çµã£ã¦ã„ã‚‹ã®ã§é€šå¸¸ã¯å•é¡Œãªã„ãŒã€å¤šæ•°ã®ãƒªãƒã‚¸ãƒˆãƒªã‚’æŒã£ã¦ã„ã‚‹å ´åˆã¯é–“éš”ã‚’ç©ºã‘ã‚‹ã‹ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‚’æ¤œè¨ã€‚
* Notion ã® `æ—¥ä»˜` ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ãŒã‚«ã‚¹ã‚¿ãƒ ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆï¼ˆè¡¨ç¤ºå½¢å¼ï¼‰ã¨å†…éƒ¨æ¯”è¼ƒç”¨ã® ISO æ—¥ä»˜ãŒä¸€è‡´ã™ã‚‹ã‚ˆã†ã«ç¢ºèªã€‚
* `Github` ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã‚’ä¸Šæ›¸ãã™ã‚‹ãŸã‚ã€éå»å†…å®¹ã‚’æ®‹ã—ãŸã„å ´åˆã¯äº‹å‰ã«è¤‡è£½ï¼ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ã™ã‚‹ã‹ã€å±¥æ­´ä¿å­˜ãƒ­ã‚¸ãƒƒã‚¯ã‚’è¿½åŠ ã™ã‚‹ã€‚
